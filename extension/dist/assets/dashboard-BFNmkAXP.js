import{r as o,j as e,c as b}from"./globals-2cAt5PPc.js";import{f as p,a as j}from"./spaced-repetition-BOW8Q9lu.js";function f(){var x,n;const[t,c]=o.useState(null),[s,l]=o.useState(!0);o.useEffect(()=>{a()},[]);async function a(){try{const r=await chrome.runtime.sendMessage({type:"GET_REVIEW_QUEUE"});r&&c(r)}catch(r){console.error("Failed to load reviews:",r)}finally{l(!1)}}async function i(r){r.problem.url&&chrome.tabs.create({url:r.problem.url})}return s?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-cortex-muted",children:"Loading reviews..."})}):(((x=t==null?void 0:t.dueNow)==null?void 0:x.length)||0)+(((n=t==null?void 0:t.dueToday)==null?void 0:n.length)||0)>0?e.jsxs("div",{className:"space-y-6",children:[(t==null?void 0:t.dueNow)&&t.dueNow.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-medium text-cortex-text mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-cortex-primary animate-pulse"}),"Due Now (",t.dueNow.length,")"]}),e.jsx("div",{className:"space-y-2",children:t.dueNow.map(r=>e.jsx(h,{item:r,onStart:()=>i(r)},r.problem.id))})]}),(t==null?void 0:t.dueToday)&&t.dueToday.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-medium text-cortex-muted mb-3",children:["Due Later Today (",t.dueToday.length,")"]}),e.jsx("div",{className:"space-y-2",children:t.dueToday.map(r=>e.jsx(h,{item:r,onStart:()=>i(r)},r.problem.id))})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸŽ‰"}),e.jsx("h3",{className:"text-lg font-medium text-cortex-text mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-cortex-muted",children:"No reviews due. Go solve some problems!"}),e.jsx("button",{onClick:()=>chrome.tabs.create({url:"https://leetcode.com/problemset/"}),className:"btn btn-primary mt-4",children:"Open LeetCode"})]})}function h({item:t,onStart:c}){const{problem:s,sr:l,isDueNow:a}=t;return e.jsxs("div",{className:`card flex items-center justify-between ${a?"ring-1 ring-cortex-primary/50":""}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-cortex-text truncate",children:s.title}),s.difficulty&&e.jsx("span",{className:`badge badge-${s.difficulty}`,children:s.difficulty})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-cortex-muted",children:[e.jsx("span",{className:"capitalize",children:s.platform}),s.pattern&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:s.pattern.replace(/-/g," ")})]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Interval: ",p(l.intervalDays)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[e.jsx("span",{className:`text-sm ${a?"text-cortex-primary font-medium":"text-cortex-muted"}`,children:a?"Ready":j(l.nextReview)}),e.jsx("button",{onClick:c,className:`btn btn-sm ${a?"btn-primary":"btn-secondary"}`,children:"Review"})]})]})}const v="http://localhost:3001";function y(){return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“Š"}),e.jsx("h3",{className:"text-lg font-medium text-cortex-text mb-2",children:"View Activity History Online"}),e.jsx("p",{className:"text-cortex-muted mb-4",children:"Your activity data is now stored in the web app for better reliability."}),e.jsx("a",{href:`${v}/study-log`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary inline-block",children:"Open Study Log"})]})}const N="http://localhost:3001";function g(){return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“š"}),e.jsx("h3",{className:"text-lg font-medium text-cortex-text mb-2",children:"View Problems Online"}),e.jsx("p",{className:"text-cortex-muted mb-4",children:"Your problem data is now stored in the web app for better reliability and cross-device access."}),e.jsx("a",{href:`${N}/study-log/problems`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary inline-block",children:"Open Problems List"})]})}const w="http://localhost:3001";function R(){const[t,c]=o.useState(null),[s,l]=o.useState("problems"),[a,i]=o.useState(!0);o.useEffect(()=>{m()},[]);async function m(){try{const n=await chrome.runtime.sendMessage({type:"GET_STATS"});n&&c(n)}catch(n){console.error("Failed to load stats:",n)}finally{i(!1)}}function x(){window.open(`${w}/study-log`,"_blank")}return a?e.jsx("div",{className:"min-h-screen bg-cortex-bg flex items-center justify-center",children:e.jsx("div",{className:"text-cortex-muted",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen bg-cortex-bg",children:[e.jsx("header",{className:"bg-cortex-surface border-b border-cortex-border",children:e.jsx("div",{className:"max-w-6xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-cortex-primary rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:"CL"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-cortex-text",children:"Cortex Lattice"}),e.jsx("p",{className:"text-sm text-cortex-muted",children:"Problem Solving Tracker"})]})]}),e.jsxs("button",{onClick:x,className:"btn btn-primary text-sm flex items-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),e.jsx("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),"Open Web Dashboard"]})]})})}),e.jsxs("main",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(d,{label:"Problems Solved",value:(t==null?void 0:t.totalProblems)??0,color:"text-cortex-text"}),e.jsx(d,{label:"Reviews Due",value:(t==null?void 0:t.reviewsDueToday)??0,color:"text-cortex-primary",highlight:t!=null&&t.reviewsDueToday?t.reviewsDueToday>0:!1}),e.jsx(d,{label:"Cold Solve Rate",value:`${Math.round(((t==null?void 0:t.coldSolveRate)??0)*100)}%`,color:"text-emerald-400"}),e.jsx(d,{label:"Day Streak",value:(t==null?void 0:t.currentStreak)??0,color:"text-yellow-400",icon:"ðŸ”¥"})]}),e.jsxs("div",{className:"flex gap-4 border-b border-cortex-border mb-6",children:[e.jsx("button",{onClick:()=>l("problems"),className:`pb-3 px-1 text-sm font-medium transition-colors ${s==="problems"?"text-cortex-primary border-b-2 border-cortex-primary":"text-cortex-muted hover:text-cortex-text"}`,children:"All Problems"}),e.jsx("button",{onClick:()=>l("reviews"),className:`pb-3 px-1 text-sm font-medium transition-colors ${s==="reviews"?"text-cortex-primary border-b-2 border-cortex-primary":"text-cortex-muted hover:text-cortex-text"}`,children:"Review Queue"}),e.jsx("button",{onClick:()=>l("activity"),className:`pb-3 px-1 text-sm font-medium transition-colors ${s==="activity"?"text-cortex-primary border-b-2 border-cortex-primary":"text-cortex-muted hover:text-cortex-text"}`,children:"Activity History"})]}),s==="problems"&&e.jsx(g,{}),s==="reviews"&&e.jsx(f,{}),s==="activity"&&e.jsx(y,{})]})]})}function d({label:t,value:c,color:s,highlight:l,icon:a}){return e.jsxs("div",{className:`card ${l?"ring-2 ring-cortex-primary":""}`,children:[e.jsxs("div",{className:`text-3xl font-bold ${s} flex items-center gap-2`,children:[a&&e.jsx("span",{children:a}),c]}),e.jsx("div",{className:"text-sm text-cortex-muted mt-1",children:t})]})}const u=document.getElementById("root");u&&b(u).render(e.jsx(R,{}));
